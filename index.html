<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BPBD Provinsi Lampung</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="styles.css?v=1.0.1">
</head>
<body>

    <!-- Header -->
    <header class="header-custom text-white py-3 position-relative">
        <div id="carouselHeaderBackground" class="carousel slide carousel-fade position-absolute w-100 h-100" data-bs-ride="carousel">
            <div class="carousel-inner">
                <div class="carousel-item active">
                    <img src="images/header/header4.png" class="d-block w-100 small-slide" alt="Slide 1">
                </div>
                <div class="carousel-item">
                    <img src="images/header/header2.png" class="d-block w-100 small-slide" alt="Slide 2">
                </div>
                <div class="carousel-item">
                    <img src="images/header/header3.png" class="d-block w-100 small-slide" alt="Slide 3">
                </div>
                <div class="carousel-item">
                    <img src="images/header/header1.png" class="d-block w-100 small-slide" alt="Slide 4">
                </div>
            </div>
        </div>
        <div class="container d-flex justify-content-between align-items-center position-relative">
            <div class="d-flex align-items-center">
                <a href="index.html">
                    <img src="https://i.ibb.co.com/cXRjt8c/bpbd.png" alt="BPBD Logo" height="120">
                </a>
                <h1 class="ms-3 fs-4">Badan Penanggulangan Bencana<br>Daerah Provinsi Lampung</h1>
            </div>
            <div>
                <a href="https://www.instagram.com/bpbdlampung/" target="_blank" class="text-white me-3">
                    <i class="fab fa-instagram fa-2x"></i>
                </a>
                <a href="https://www.facebook.com/bpbdlampung/" target="_blank" class="text-white me-3">
                    <i class="fab fa-facebook fa-2x"></i>
                </a>
                <a href="https://twitter.com/bpbdlampung" target="_blank" class="text-white">
                    <i class="fab fa-twitter fa-2x"></i>
                </a>
            </div>
        </div>
        <div class="welcome-text text-center position-absolute w-100">
            <h2>Selamat Datang di Website Resmi<br>Badan Penanggulangan Bencana Daerah Provinsi Lampung</h2>
        </div>
    </header>
    
    <!-- Navigation -->
    <nav class="navbar navbar-expand-lg navbar-dark">
        <div class="container d-flex justify-content-center">
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav">
                    <li class="nav-item">
                        <a class="nav-link" href="index.html">Home</a>
                    </li>
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" href="#" id="profileDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                            Profil
                        </a>
                        <ul class="dropdown-menu" aria-labelledby="profileDropdown">
                            <li><a class="dropdown-item" href="sejarah.html">Sejarah BNPB/BPBD</a></li>
                            <li><a class="dropdown-item" href="visi-misi.html">Visi dan Misi</a></li>
                            <li><a class="dropdown-item" href="struktur-organisasi.html">Struktur Organisasi</a></li>
                            <li><a class="dropdown-item" href="tugas-fungsi.html">Tugas dan Fungsi</a></li>
                            <li><a class="dropdown-item" href="kontak-kami.html">Kontak Kami</a></li>
                        </ul>
                    </li>
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" href="#" id="beritaDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                            Berita
                        </a>
                        <ul class="dropdown-menu" aria-labelledby="beritaDropdown">
                            <li><a class="dropdown-item" href="berita-terbaru.html">Berita Terbaru</a></li>
                            <li><a class="dropdown-item" href="siaga-bencana.html">Siaga Bencana</a></li>
                            <li><a class="dropdown-item" href="kegiatan.html">Kegiatan</a></li>
                            <li><a class="dropdown-item" href="pengumuman.html">Pengumuman</a></li>
                        </ul>
                    </li>
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" href="#" id="dokumenDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                            Dokumen
                        </a>
                        <ul class="dropdown-menu" aria-labelledby="dokumenDropdown">
                            <li><a class="dropdown-item" href="peraturan-kebijakan.html">Peraturan dan Kebijakan</a></li>
                            <li><a class="dropdown-item" href="laporan-tahunan.html">Laporan Tahunan</a></li>
                            <li><a class="dropdown-item" href="panduan-sop.html">Panduan dan SOP</a></li>
                            <li><a class="dropdown-item" href="publikasi-penelitian.html">Publikasi dan Penelitian</a></li>
                            <li><a class="dropdown-item" href="formulir.html">Formulir</a></li>
                        </ul>
                    </li>
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" href="#" id="galeriDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                            Galeri
                        </a>
                        <ul class="dropdown-menu" aria-labelledby="galeriDropdown">
                            <li><a class="dropdown-item" href="foto-kegiatan.html">Foto Kegiatan</a></li>
                            <li><a class="dropdown-item" href="video-dokumentasi.html">Video Dokumentasi</a></li>
                            <li><a class="dropdown-item" href="infografis.html">Infografis</a></li>
                        </ul>
                    </li>
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" href="#" id="kontakDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                            Kontak
                        </a>
                        <ul class="dropdown-menu" aria-labelledby="kontakDropdown">
                            <li><a class="dropdown-item" href="hubungi-kami.html">Hubungi Kami</a></li>
                            <li><a class="dropdown-item" href="lokasi-kantor.html">Lokasi Kantor</a></li>
                            <li><a class="dropdown-item" href="media-sosial.html">Media Sosial</a></li>
                            <li><a class="dropdown-item" href="pertanyaan-umum.html">Pertanyaan Umum</a></li>
                            <li><a class="dropdown-item" href="layanan-pengaduan.html">Layanan Pengaduan</a></li>
                        </ul>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <!-- Section 1: Rekapitulasi Bencana -->
    <section id="rekapitulasi" class="bg-warning text-white text-center py-5">
        <div class="container">
            <h2>Rekapitulasi Bencana Provinsi Lampung 2024</h2>
            <div class="row mt-4">
                <div class="col-md-3">
                    <h3>16</h3>
                    <p>Jumlah Bencana</p>
                </div>
                <div class="col-md-3">
                    <h3>09</h3>
                    <p>Jiwa Meninggal</p>
                </div>
                <div class="col-md-3">
                    <h3>02</h3>
                    <p>Jiwa Hilang</p>
                </div>
                <div class="col-md-3">
                    <h3>234</h3>
                    <p>Unit Bangunan Rusak</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Section 2: Cuaca Harian -->
    <section id="cuaca-harian" class="text-center py-5" style="background: linear-gradient(#00aaff, #a9e2ff);">
        <div class="container">
            <h2 class="text-white">Cuaca Harian</h2>
            <div id="weatherCarousel" class="carousel slide" data-bs-ride="carousel">
                <div class="carousel-inner" id="weather-content">
                    <!-- JavaScript will populate this area with weather data -->
                </div>
                <button class="carousel-control-prev" type="button" data-bs-target="#weatherCarousel" data-bs-slide="prev">
                    <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                    <span class="visually-hidden">Previous</span>
                </button>
                <button class="carousel-control-next" type="button" data-bs-target="#weatherCarousel" data-bs-slide="next">
                    <span class="carousel-control-next-icon" aria-hidden="true"></span>
                    <span class="visually-hidden">Next</span>
                </button>
            </div>
            <div class="mt-4">
                <a href="cuaca-harian.html" class="btn btn-outline-primary">Lihat Selengkapnya</a>
            </div>
        </div>
    </section>

    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.3/dist/umd/popper.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.min.js"></script>
    <script>
        // Load XML data from BMKG
        fetch('https://data.bmkg.go.id/DataMKG/MEWS/DigitalForecast/DigitalForecast-Lampung.xml')
            .then(response => response.text())
            .then(data => {
                const parser = new DOMParser();
                const xmlDoc = parser.parseFromString(data, 'text/xml');

                const areas = xmlDoc.getElementsByTagName('area');
                let weatherHtml = '';
                let slideHtml = '';
                let slideCount = 0;
                let totalAreas = 0;

                const sortedAreas = Array.from(areas).sort((a, b) => {
                    // Prioritize Bandar Lampung
                    if (a.getAttribute('description') === 'Bandar Lampung') return -1;
                    if (b.getAttribute('description') === 'Bandar Lampung') return 1;
                    return a.getAttribute('description').localeCompare(b.getAttribute('description'));
                });

                sortedAreas.forEach(area => {
                    const cityName = area.getAttribute('description');

                    // Get weather details
                    const parameters = area.getElementsByTagName('parameter');
                    const temperature = parameters[5].getElementsByTagName('timerange')[0].getElementsByTagName('value')[0].textContent;
                    const weather = parameters[6].getElementsByTagName('timerange')[0].getElementsByTagName('value')[0].textContent;

                    // Map weather codes to icons
                    let weatherIcon = '';
                    let weatherDescription = '';
                    switch (weather) {
                        case '0':
                            weatherIcon = 'https://i.ibb.co/5KJ8Hmp/sun.png';
                            weatherDescription = 'Cerah';
                            break;
                        case '1':
                            weatherIcon = 'https://i.ibb.co/y8wz86t/cloudy.png';
                            weatherDescription = 'Cerah Berawan';
                            break;
                        case '3':
                            weatherIcon = 'https://i.ibb.co/gScvs7m/rainy.png';
                            weatherDescription = 'Hujan Sedang';
                            break;
                        case '4':
                            weatherIcon = 'https://i.ibb.co/wLpbrwC/hujanpetir.png';
                            weatherDescription = 'Hujan Petir';
                            break;
                        default:
                            weatherIcon = 'https://i.ibb.co/y8wz86t/cloudy.png';
                            weatherDescription = 'Berawan';
                    }

                    slideHtml += `
                        <div class="col-md-2">
                            <div class="card bg-transparent border-0">
                                <img src="${weatherIcon}" alt="${weatherDescription} Icon" class="card-img-top mx-auto d-block" style="width: 50px;">
                                <div class="card-body">
                                    <p class="card-text">${cityName}<br>${temperature}Â°C<br>${weatherDescription}</p>
                                </div>
                            </div>
                        </div>
                    `;

                    totalAreas++;
                    if (totalAreas % 5 === 0 || totalAreas === sortedAreas.length) {
                        weatherHtml += `
                            <div class="carousel-item ${slideCount === 0 ? 'active' : ''}">
                                <div class="row justify-content-center">
                                    ${slideHtml}
                                </div>
                            </div>
                        `;
                        slideHtml = '';
                        slideCount++;
                    }
                });

                document.getElementById('weather-content').innerHTML = weatherHtml;
            })
            .catch(error => console.error('Error loading weather data:', error));
    </script>

    <!-- Section 3: Infografis Rekapitulasi Bencana -->
    <section id="infografis" class="text-white text-center py-5" style="background: linear-gradient(#0A4ED3, #839ac7);">
        <div class="container">
            <h2>Infografis Rekapitulasi Bencana</h2>
            <div id="infografisCarousel" class="carousel slide" data-bs-ride="carousel">
                <div class="carousel-inner">
                    <div class="carousel-item active">
                        <div class="row">
                            <div class="col">
                                <img src="https://i.ibb.co.com/MCC91Pn/Rekapitulasi-Bencana-Januari-2024-1.png" alt="Januari" class="d-block mx-auto">
                                <p>Januari</p>
                            </div>
                            <div class="col">
                                <img src="https://i.ibb.co.com/sy6crMt/Rekapistulasi-Bulan-Febuari-2024-1.png" alt="Februari" class="d-block mx-auto">
                                <p>Februari</p>
                            </div>
                            <div class="col">
                                <img src="https://i.ibb.co.com/R762JZ5/Rekapistulasi-Bulan-Maret-2024-1.png" alt="Maret" class="d-block mx-auto">
                                <p>Maret</p>
                            </div>
                            <div class="col">
                                <img src="https://i.ibb.co.com/zJHhD0d/Rekapistulasi-Bulan-April-2024-1.png" alt="April" class="d-block mx-auto">
                                <p>April</p>
                            </div>
                        </div>
                    </div>
                    <div class="carousel-item">
                        <div class="row">
                            <div class="col">
                                <img src="https://i.ibb.co.com/zJHhD0d/Rekapistulasi-Bulan-April-2024-1.png" alt="Mei" class="d-block mx-auto">
                                <p>Mei</p>
                            </div>
                            <div class="col">
                                <img src="https://i.ibb.co.com/zJHhD0d/Rekapistulasi-Bulan-April-2024-1.png" alt="Juni" class="d-block mx-auto">
                                <p>Juni</p>
                            </div>
                            <div class="col">
                                <img src="https://i.ibb.co.com/zJHhD0d/Rekapistulasi-Bulan-April-2024-1.png" alt="Juli" class="d-block mx-auto">
                                <p>Juli</p>
                            </div>
                            <div class="col">
                                <img src="https://i.ibb.co.com/zJHhD0d/Rekapistulasi-Bulan-April-2024-1.png" alt="Agustus" class="d-block mx-auto">
                                <p>Agustus</p>
                            </div>
                        </div>
                    </div>
                    <div class="carousel-item">
                        <div class="row">
                            <div class="col">
                                <img src="https://i.ibb.co.com/zJHhD0d/Rekapistulasi-Bulan-April-2024-1.png" alt="September" class="d-block mx-auto">
                                <p>September</p>
                            </div>
                            <div class="col">
                                <img src="https://i.ibb.co.com/zJHhD0d/Rekapistulasi-Bulan-April-2024-1.png" alt="Oktober" class="d-block mx-auto">
                                <p>Oktober</p>
                            </div>
                            <div class="col">
                                <img src="https://i.ibb.co.com/zJHhD0d/Rekapistulasi-Bulan-April-2024-1.png" alt="November" class="d-block mx-auto">
                                <p>November</p>
                            </div>
                            <div class="col">
                                <img src="https://i.ibb.co.com/zJHhD0d/Rekapistulasi-Bulan-April-2024-1.png" alt="Desember" class="d-block mx-auto">
                                <p>Desember</p>
                            </div>
                        </div>
                    </div>
                </div>
                <button class="carousel-control-prev" type="button" data-bs-target="#infografisCarousel" data-bs-slide="prev">
                    <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                    <span class="visually-hidden">Previous</span>
                </button>
                <button class="carousel-control-next" type="button" data-bs-target="#infografisCarousel" data-bs-slide="next">
                    <span class="carousel-control-next-icon" aria-hidden="true"></span>
                    <span class="visually-hidden">Next</span>
                </button>
                <div class="mt-4">
                <a href="infografis.html" class="btn btn-outline-primary">Lihat Selengkapnya</a>
                </div> 
            </div>
        </div>
    </section>

    <!-- Section 4: Berita -->
    <section id="berita" class="py-5">
        <div class="container text-center">
            <h2>Berita Terbaru</h2>
            <div class="row mt-4">
                <div class="col-md-4">
                    <div class="card">
                        <img src="images/09-08-24/KarhutlaMesuji11.jpg" class="card-img-top" alt="Berita 1">
                        <div class="card-body">
                            <h5 class="card-title">Kebakaran Hutan Landa Kabupaten Mesuji</h5>
                            <p class="card-text">Kebakaran hutan melanda 60 hektar lahan di Kabupaten Mesuji, dengan upaya pemadaman masih berlangsung.</p>
                            <a href="berita_detail.html" class="btn btn-primary">Baca Selengkapnya</a>
                        </div>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="card">
                        <img src="images/08-08-24/angin11.jpg" class="card-img-top" alt="Berita 2">
                        <div class="card-body">
                            <h5 class="card-title">Angin Kencang Terjang Kabupaten Tulang Bawang Barat</h5>
                            <p class="card-text">Angin kencang merusak rumah warga di Tulang Bawang Barat tanpa korban jiwa, kerugian mencapai Rp. 25 juta.</p>
                            <a href="berita_detail2.html" class="btn btn-primary">Baca Selengkapnya</a>
                        </div>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="card">
                        <img src="images/03-08-24/angin11.jpg" class="card-img-top" alt="Berita 3">
                        <div class="card-body">
                            <h5 class="card-title">Angin Kencang Landa Kabupaten Lampung Timur</h5>
                            <p class="card-text">Angin kencang di Lampung Timur rusak sarana pendidikan dan rumah warga, kerugian diperkirakan Rp. 20 juta.</p>
                            <a href="berita_detail3.html" class="btn btn-primary">Baca Selengkapnya</a>
                        </div>
                    </div>
                </div>
            </div>
            <div class="mt-4">
                <a href="berita-terbaru.html" class="btn btn-outline-primary">Lihat Berita Lainnya</a>
            </div>            
        </div>
    </section>

    <!-- Informasi Kontak -->
    <footer class="bg-primary text-white text-center py-4">
        <div class="container">
            <h2>Informasi Kontak</h2>
            <p>Instagram: @bpbdlampung</p>
            <p>Alamat: Jl. Gatot Subroto No.44, Pahoman, Engal, Kota Bandar Lampung, Lampung 35123</p>
            <div class="custom-map-container mt-3">
                <iframe src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d992.979164846108!2d105.2752341!3d-5.429630200000002!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x2e40dbc8ff06f2d5%3A0x55a4f7f2443ca45a!2sKantor%20SATPOL%20PP%20Provinsi%20Lampung!5e0!3m2!1sen!2sid!4v1721878083055!5m2!1sen!2sid" style="border:0;" allowfullscreen="" loading="lazy" referrerpolicy="no-referrer-when-downgrade"></iframe>
            </div>
        </div>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.3/dist/umd/popper.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.min.js"></script>

    <!-- <script type="module" src="scripts.js"></script> -->
</body>
</html>